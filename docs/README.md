# Диаграмма вариантов использования

|| Тип пользователя        |      название usecase   |
|-------------------------||-------------------------|:-----------------------:|
|1| пользователь            |  [Просмотр статистики проигрышей и выигрышей](#statlist_usecase) |
|2| пользователь            |     [Присоединиться к игре по ссылке](#join_by_link_to_game_usecase) |  
|3| пользователь            | [Просмотр доступных лобби для входа](#list_lobby_usecase) |
|4| пользователь            |   [Общий чат и чат с другом](#chat_all_and_friend_usecase) |
|5| пользователь		  	  | [Регистрация и авторизация](#registration_and_authorization)|
|6| пользователь			  | [Игра дурак](#fool_game)|
|7| пользователь            | [Добавление в друзья другого пользователя](#add_friend)|
|8| пользователь            | [Создание лобби и приглашение игроков](#create_lobby_and_invite_players)|
|9| пользователь            | [Настройка профиля](#profile_settings)|

## <a name="statlist_usecase">Просмотр статистики проигрышей и выигрышей</a>
  Список игр с отображением характеристик сыгранных игр:
    1. продолжительность игры в минутах
    2. кол-во рейтинга убавилось или уменьшилось
    3. игра была приватная или нет
    4. сколько игроков было в игре
    5. занятое место в игре (первый, второй и тд)

Например (ключ словаря - айди игры, список - атрибуты сверху):
{\
  1: [5, -12, false, 3, 2],\
  2: [5, 12, false, 3, 1],\
  3: [5, 1, false, 4, 3],\
  4: [5, -12, false, 5, 5]\
}

## <a name="join_by_link_to_game_usecase">Присоединиться к игре по ссылке</a>
У человека, которому доступна ссылка к игре, может открыть ее в браузере и перейти в игру.
Ограничения при присоединении через ссылку:
1) нет мест в лобби
2) если указана опция "только зарегистрированные" и у человека при подключении нет аккаунта (его попросит войти если в браузере из аккаунта вышло), 
то такой пользователь не подключиться к лобби пока не зарегистрируется
3) При опции "только зарегистрированные". Если у пользователя нет рейтинга диапазон который указан в поле "требуемый рейтинг". 
Значение "любой" в этом поле позволяет присоединиться пользователю с любым рейтингом.
end note

## <a name="list_lobby_usecase">Просмотр доступных лобби для входа</a>
Зарегистрированному пользователю дается список лобби с кнопкой зайти\попросить войти.
Ограничения на отображения лобби другим пользователям:
1. лобби приватное
2. лобби не подходит под выбранный диапазон рейтинга
3. лобби не подходит под выбранные фильтры

## <a name="chat_all_and_friend_usecase">Общий чат и чат с другом</a>
Пользователю доступен чат со всеми игроками (как в клэш оф клансе) 
и при просмотре списка друзей есть доступ к чату с другом

## <a name="registration_and_authorization">Регистрация и авторизация</a>
Основные параметры: логин, пароль.
Логин должен быть уникальным
Пароль должен состоять минимум из 8 символов, включающий цифры, спецсимволы и буквы, как заглавные так и строчные.

Процесс регистрации состоит из заполнения трёх полей:
1. Логин
2. Введите пароль
3. Повторить пароль

Авторизация:
1. Логин
2. Пароль

## <a name="fool_game">Игра дурак</a>
В игру могут играть от 2 до 6 человек.
Есть две разновидности игры: подкидной и переводной.
**Подкидной дурак**
Цель игры: избавиться от всех карт.
Набор состоит из классической колоды - 36 карт.
В начеле игры происходит случайное распределение карт между игроками по шесть штук. Оставшиеся карты используется в дальнейшем для добора "руки".
Старшинство карт в колодах, от меньшего к большему: 6, 7, 8, 9, 10, Валет, Дама, Король, Туз.
Старшинство мастей для игры не определено. Но, в начале каждой игры объявляется козырь - та масть,
игральные карты которой способны бить карты других мастей. Карты других мастей в этой игре способны бить карту только в том случае, если эта карта
является аналогичной масти и младшая по страшинству. Козырь определяется путём выбора из колоды "добора" первой карты. Масть этой карты становится козырем.

Карта, объявившая козырную масть, перемещается на дно колоды и располагается так, чтобы её было видно. В случае, когда играет 6 человек, то последняя раздаваемая карта
так же объявляет козырную масть и уходить в "руку" игрока.

Во всех случаях, когда эта карта покидает стол, на её месте оказыватся символ козырной масти, чтобы все игроки видели, какая масть
в игре козырная.

Карты "руки" игроков являются скрытми, то есть их может видеть только их владелец. Однако количество карт в "руке" известно всем.

Если у одного из игроков после раздачи оказались 5 или 6 карт одной масти в "руке", то он может потребовать пересдачу всех карт.

Перед стартом игры, определяется игрок, который будет ходить первым: у кого в "руке" самая младшая карта козырной масти, тот и ходить первым.
Если ни у кого нет козырной карты в начала игры, то первым будет ходить случайный человек.

Есть три роли, которые человек может принимать за всю игру:
1. Заходящий игрок
2. Отбивающийся
3. Подкидывающий

Игрок, который ходит первым, становится *заходящим*; следующий по ходу часовой стрелки от него становится *отбивающимся*; остальные становятся *подкидывающими*.

*Заходящий* в начале каждого своего хода выбирает одну из карт своей "руки". Выбранная карта кладётся на стол. Теперь её должен "побить" *отбивающийся*.
*Заходящий* также имеет возможность выбрать сразу несколько карт в начале своего хода в случае, если они равны по номиналу друг другу.
Если *отбивающийся* смог побить карту/карты, то *заходящему* предлагается подкинуть ещё карты по принципу "Если карта этого номинала уже присутствует на столе,
то её можно добавить". Как только *заходящий* подкинул *отбивающемуся* карты (либо не подкинул), то далее подкинуть карты предлагается следующему от него по
часовой стрелеке *подкидывающему*. Так происходит до тех пор, пока либо количество карт для битья на столе не станет равно максимуму (6 карт в сумме), либо 
все *подкидывающие* сделают свой выбор по добавлению карт на стол.

После этого *отбивающийся* может побить все эти карты. Если ему удаётся это сделать и количество карт для битья не привысило 6, то ему снова подкидывают ещё карт
другие игроки.

Если *отбивающийся* не может бить карты либо желает этого не делать, то он собирает все карты со стола, которые были за этот ход. Также он обязан взять все карты,
которые ему ещё подкинут другие игроки.

В случае, если *отбивающийся* побил все карты на столе и либо ему больше не подкидывают карт, либо их количество на столе стало равно допустимуму максимуму, то
карты со стола отправляются в сброс (больше они в игре не учавствуют).

После хода игроки осуществляют добор карт "руки" до шести. Первым добирает *заходящий*, затем следующий по часовой стрелке *подкидывающий* и так до тех пор,
пока все *подкидывающие* не добирут карты. Самым последним добирает *отбивающийся*.

Затем, происходит смена ролей.
Если *отбивающийся* не отбился:
1) в игре 2 человека - игроки не меняют ролей
2) более 2 - *отбивающийся* становится *подкидывающим*, человек слева от него (по часовой стрелке) *заходящим*, а следующий *отбивающимся*; остальные игроки - становятся
*подкидывающими*
Если *отбивающийся* отбился:
1) *отбивающийся* становится *заходящим*, а другой игрок наоборот
2) *отбивающийся* становится *заходящим*, следующий по ходу от него игрок - *отбивающимся*, а остальные - *подкидывающими*

В случае, если игрок избавляется от всех карт за ход, а колода добора пуста, то он выходит из игры.
Последний оставшийся игрок признаётся дураком и проигрывает.

**Переводной**
В этой разновидности правила не отличаются. Однако добавляется возможность у *отбивающегося* в начале хода "перевести" карту/карты *заходящего* на следующего по ходу
игрока. Для этого нужно иметь карту, которая соответствует номиналу той/тех карты/карт, которые были использованы для начала хода. Эта карта также кладётся на стол, но
если это козырь, то достаточно просто показать её остальным игрокам.
Таким образом роли меняются по часовой стрелке. *Отбивающийся* становится *заходящим*, а вот игрок следующий от него *отбивающимся*; все остальные - *подкидывающие*.
В свою очередь новоиспечённый *отбивающийся* так же имеет право перевести.

## <a name="add_friend">Добавление в друзья другого пользователя</a>
Добавить пользователей в список друзей можно по одному из способов:
1. Поиск игроков для добавления в друзья по логину
2. Скопировать свою ссылку для добавления в друзья

Так же можно просмотреть заявки по добавлению в друзья, которые можно:
1. Принять
2. Отклонить

Будет виден список текущих друзей, в котором можно будет:
1. Перейти на их страницу
2. Удалить пользователя из друзей


## <a name="create_lobby_and_invite_players">Создание лобби и приглашение игроков</a>
Во время создания лобби настраиваются следующие параметры.
1. Учитывать Ваш рейтинг для ограничения подбора игроков
2. Не учитывать рейтинг ни коим образом
3. Приватное лобби - можно подлкючиться к игре только по ссылке, либо если вы друг
4. Открытое лобби - игра доступна в "Общем списке лобби"
5. Настройка разновидности игры: дурак подкидной либо переводной.

Здесь же можно скопировать ссылку на игру, по которой другие люди смогут подключится к этому лобби.
Так же есть возможность добавить в игру людей из Вашего списка друзей.


## <a name="profile_settings">Настройка профиля</a>
После регистрации в профиле по желанию можно будет настроить параметры, приведённые ниже.
1. Имя
2. Фамилия
3. Дата рождения
4. Город (выпадающий список с поиском городов)
5. Электронная почта
6. Телефон

Эти параметры можно в любой момент редактировать.
